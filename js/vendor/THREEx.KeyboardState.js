var THREEx=THREEx||{};THREEx.KeyboardState=function(){this.keyCodes={},this.modifiers={};var a=this;this._onKeyDown=function(b){a._onKeyChange(b,!0)},this._onKeyUp=function(b){a._onKeyChange(b,!1)},document.addEventListener("keydown",this._onKeyDown,!1),document.addEventListener("keyup",this._onKeyUp,!1)},THREEx.KeyboardState.prototype.destroy=function(){document.removeEventListener("keydown",this._onKeyDown,!1),document.removeEventListener("keyup",this._onKeyUp,!1)},THREEx.KeyboardState.MODIFIERS=["shift","ctrl","alt","meta"],THREEx.KeyboardState.ALIAS={left:37,up:38,right:39,down:40,space:32,pageup:33,pagedown:34,tab:9},THREEx.KeyboardState.prototype._onKeyChange=function(a,b){var c=a.keyCode;this.keyCodes[c]=b,this.modifiers.shift=a.shiftKey,this.modifiers.ctrl=a.ctrlKey,this.modifiers.alt=a.altKey,this.modifiers.meta=a.metaKey},THREEx.KeyboardState.prototype.pressed=function(a){for(var b=a.split("+"),c=0;c<b.length;c++){var e,d=b[c];if(e=-1!==THREEx.KeyboardState.MODIFIERS.indexOf(d)?this.modifiers[d]:-1!=Object.keys(THREEx.KeyboardState.ALIAS).indexOf(d)?this.keyCodes[THREEx.KeyboardState.ALIAS[d]]:this.keyCodes[d.toUpperCase().charCodeAt(0)],!e)return!1}return!0};